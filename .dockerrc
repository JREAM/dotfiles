#!/bin/bash
# ___________________________________________________________________
#
#                  Dockerrc [Sourced from .bashrc]
#                         Docker Shortcuts
#
# Note: Using rm<i|c|v> (i:images, c:containers, v:volumes>
#
# < Built-in 1.13+ >
# 1: Remove all stopped containers:
#   $ docker container prune
#   $ docker container prune --filter "until=1w"
# 2: System Prune:
#   $ docker system prune -a
# ___________________________________________________________________

# ___________________________________________________________________
#
#                           SETTINGS
# ___________________________________________________________________
#
MY_PORTAINER_PORT=9500
MY_PORTAINER_NAME="portainer"

# ___________________________________________________________________
#
#                           FUNCTIONS
# ___________________________________________________________________

# UTIL: Get last ID
function docker-last-id() {
    docker ps -l -q
}

# DANGLISH: Remove Images
function docker-rmi-dangling() {
    docker images -q --filter 'dangling=true' | xargs docker rmi
}

# DANGLISH: Remove Volumes
function docker-rmv-dangling() {
    docker volume rm $(docker volume ls -q -f dangling=true)
}

# IMAGES: Remove ALL
function docker-rmi-all() {
    docker rmi $(docker images -q)
}

# CONTAINERSL Remove ALL
function docker-rmc-all() {
    docker kill $(docker ps -q)
    docker ps -aq | xargs docker rm -fv
}

# CONTAINERS: Remove OLD (Weeks Ago)
function docker-rm-containers-old() {
    docker ps -a | grep 'weeks ago' | awk '{print $1}' | xargs docker rm
}

# ___________________________________________________________________
#
#                           PORTAINER
# ___________________________________________________________________
function portainer-setup() {
    docker volume create portainer_data
    docker run -d --name=$MY_PORTAINER_NAME -p $MY_PORTAINER_PORT:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer
}

function portainer() {
    docker start $MY_PORTAINER_NAME
}

function portainer-stop() {
    docker stop $MY_PORTAINER_NAME
}

# End of File
